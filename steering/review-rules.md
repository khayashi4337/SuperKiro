# レビュー頻出指摘ルール

このファイルはPRレビューで頻出する指摘パターンをまとめています。
Kiroはファイル保存時にこのルールをチェックし、事前に問題を検出します。

各自のプロジェクトにフィットさせるため、
初回は `steering/initial-setup.md` に沿って前提（言語/フレームワーク/レビュー方式）を整理し、検出できる粒度に調整してください。以下のエラーハンドリングをはじめとした、いろいろなルールをカスタマイズしてください。

## エラーハンドリング

### try-catchの空キャッチ
- **検出条件**: `catch` ブロックが空または `console.log` のみ
- **指摘**: 「catchブロックでエラーを適切に処理してください」
- **対策**: 最低限 `console.error` + 適切なエラー伝播

### 非同期エラーの握りつぶし
- **検出条件**: `async` 関数で `await` にtry-catchがない
- **指摘**: 「非同期処理のエラーハンドリングを追加してください」

## 型安全性

### any型の使用
- **検出条件**: `any` 型の使用
- **指摘**: 「具体的な型を定義してください」
- **例外**: 外部ライブラリの型定義が不十分な場合は `// eslint-disable-next-line` で許可

### 型アサーション乱用
- **検出条件**: `as` キーワードの多用
- **指摘**: 「型アサーションより型ガードを検討してください」

## パフォーマンス

### useEffectの依存配列
- **検出条件**: 依存配列が空 `[]` または省略
- **指摘**: 「依存配列を確認してください」
- **参照**: `docs/reviews/tags/react-hooks.md`

### 不要な再レンダリング
- **検出条件**: オブジェクト/配列リテラルをpropsに直接渡す
- **指摘**: 「useMemoまたはuseCallbackを検討してください」

## セキュリティ

### ハードコードされた秘密情報
- **検出条件**: `password`, `secret`, `apikey` などを含む文字列リテラル
- **指摘**: 「環境変数を使用してください」
- **重要度**: Critical

### SQLインジェクション
- **検出条件**: 文字列結合でSQLを構築
- **指摘**: 「パラメータ化クエリを使用してください」

## コード品質

### マジックナンバー
- **検出条件**: 説明のない数値リテラル
- **指摘**: 「定数として定義してください」
- **例外**: 0, 1, -1 などの明らかな値

### 長すぎる関数
- **検出条件**: 50行を超える関数
- **指摘**: 「関数を分割することを検討してください」

## 追加方法

新しい指摘パターンを追加する場合:

1. カテゴリを選択（なければ作成）
2. 以下の形式で追記:

```markdown
### 指摘名
- **検出条件**: どういう場合に指摘するか
- **指摘**: 指摘メッセージ
- **対策**: 推奨される修正方法
- **参照**: 関連ドキュメントへのリンク（任意）
```
